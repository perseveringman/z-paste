# Stash i18n Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Add internationalization support for zh-CN, en, and zh-TW to the Stash Electron clipboard manager app.

**Architecture:** Use i18next + react-i18next in the renderer process. Use standalone i18next in the main process for tray menus. Language detection follows system locale with manual override stored in settingsStore (localStorage). Language switch is communicated from renderer to main via IPC.

**Tech Stack:** i18next, react-i18next, Electron IPC, Zustand, TypeScript

---

### Task 1: Install dependencies

**Files:**
- Modify: `package.json`

**Step 1: Install i18next and react-i18next**

Run:
```bash
cd /Users/ryanbzhou/Developer/vibe-coding/freedom/z-paste && npm install i18next react-i18next
```

**Step 2: Verify installation**

Run:
```bash
cd /Users/ryanbzhou/Developer/vibe-coding/freedom/z-paste && node -e "require('i18next'); require('react-i18next'); console.log('OK')"
```
Expected: `OK`

**Step 3: Commit**

```bash
git add package.json package-lock.json
git commit -m "chore: add i18next and react-i18next dependencies"
```

---

### Task 2: Create translation files (zh-CN, en, zh-TW)

**Files:**
- Create: `src/renderer/src/locales/zh-CN.json`
- Create: `src/renderer/src/locales/en.json`
- Create: `src/renderer/src/locales/zh-TW.json`

**Step 1: Create zh-CN.json**

```json
{
  "common.confirm": "确认",
  "common.cancel": "取消",
  "common.close": "关闭",
  "common.save": "保存",
  "common.delete": "删除",
  "common.all": "全部",

  "panel.tabs.clipboard": "剪贴板",
  "panel.tabs.templates": "模板",
  "panel.search.placeholder": "搜索...",
  "panel.settings.tooltip": "设置 (⌘,)",
  "panel.empty.title": "暂无剪贴板记录",
  "panel.empty.subtitle": "复制内容后将自动出现在这里",
  "panel.preview.expand": "展开详情 (⌥)",
  "panel.quickEdit.title": "快速编辑",

  "panel.filter.all": "全部",
  "panel.filter.text": "文本",
  "panel.filter.code": "代码",
  "panel.filter.url": "URL",
  "panel.filter.json": "JSON",
  "panel.filter.color": "颜色",
  "panel.filter.image": "图片",

  "panel.tagBar.starred": "收藏",

  "panel.context.paste": "粘贴",
  "panel.context.copy": "复制内容",
  "panel.context.tag": "打标签 (T)",
  "panel.context.favorite": "收藏",
  "panel.context.unfavorite": "取消收藏",
  "panel.context.pin": "置顶",
  "panel.context.unpin": "取消置顶",
  "panel.context.delete": "删除",

  "panel.image.fallback": "图片",

  "time.justNow": "刚刚",
  "time.minutesAgo": "{{count}}m",
  "time.hoursAgo": "{{count}}h",
  "time.daysAgo": "{{count}}d",

  "settings.title": "设置",
  "settings.nav.general": "通用",
  "settings.nav.shortcuts": "快捷键",
  "settings.nav.sync": "同步",
  "settings.nav.privacy": "隐私",
  "settings.nav.theme": "主题",
  "settings.nav.tags": "标签管理",
  "settings.nav.about": "关于",

  "settings.general.title": "通用设置",
  "settings.general.language": "语言",
  "settings.general.language.desc": "选择界面显示语言",
  "settings.general.language.auto": "自动（跟随系统）",
  "settings.general.language.zhCN": "简体中文",
  "settings.general.language.en": "English",
  "settings.general.language.zhTW": "繁體中文",
  "settings.general.launchAtLogin": "开机自启",
  "settings.general.launchAtLogin.desc": "登录 macOS 时自动启动 Stash",
  "settings.general.historyRetention": "历史保留时长",
  "settings.general.historyRetention.desc": "超过时间的非收藏/非置顶记录将自动清理",
  "settings.general.retention.1day": "1 天",
  "settings.general.retention.7days": "7 天",
  "settings.general.retention.30days": "30 天",
  "settings.general.retention.forever": "永久",
  "settings.general.maxItems": "最大记录数",
  "settings.general.maxItems.desc": "超过限制时自动删除最旧的非收藏记录",

  "settings.shortcuts.title": "快捷键",
  "settings.shortcuts.showPanel": "唤起面板",
  "settings.shortcuts.showPanel.desc": "全局快捷键，唤起/隐藏剪贴板面板",
  "settings.shortcuts.sequencePaste": "序列粘贴",
  "settings.shortcuts.sequencePaste.desc": "从队列中粘贴下一条内容",
  "settings.shortcuts.batchPaste": "批量粘贴",
  "settings.shortcuts.batchPaste.desc": "一次性粘贴队列中所有内容",
  "settings.shortcuts.addToQueue": "添加到队列",
  "settings.shortcuts.addToQueue.desc": "在面板内将选中条目加入粘贴队列",
  "settings.shortcuts.batchSeparator": "批量粘贴分隔符",
  "settings.shortcuts.batchSeparator.desc": "批量粘贴时，多条内容之间的分隔方式",
  "settings.shortcuts.separator.newline": "换行",
  "settings.shortcuts.separator.tab": "Tab",
  "settings.shortcuts.separator.comma": "逗号",
  "settings.shortcuts.separator.space": "空格",
  "settings.shortcuts.hint": "提示：在面板中使用 ⌘+Click 多选条目，按 Enter 批量加入队列",

  "settings.sync.title": "iCloud 同步",
  "settings.sync.enable": "启用 iCloud 同步",
  "settings.sync.enable.desc": "通过 iCloud Drive 在多台 Mac 间同步剪贴板数据",
  "settings.sync.now": "立即同步",
  "settings.sync.now.desc": "手动触发一次同步",
  "settings.sync.syncing": "同步中...",
  "settings.sync.syncButton": "同步",

  "settings.privacy.title": "隐私与安全",
  "settings.privacy.encryption": "加密存储",
  "settings.privacy.encryption.desc": "使用 AES-256-GCM 加密剪贴板内容（需设置密码）",
  "settings.privacy.clearAll": "清空所有数据",
  "settings.privacy.clearAll.desc": "删除所有剪贴板记录（不可恢复）",
  "settings.privacy.confirmClear": "确认清空？",
  "settings.privacy.clearButton": "清空",

  "settings.theme.title": "主题",
  "settings.theme.auto": "自动",
  "settings.theme.dark": "暗色",
  "settings.theme.light": "亮色",

  "settings.tags.title": "标签管理",
  "settings.tags.total": "总标签数",
  "settings.tags.singleUse": "仅 1 条内容",
  "settings.tags.tooMany": "标签数量超过 15 个，建议合并类似标签以保持高效率。",
  "settings.tags.empty": "暂无标签",
  "settings.tags.rename": "重命名",
  "settings.tags.mergeTo": "合并到...",
  "settings.tags.confirmDelete": "再次点击确认删除",
  "settings.tags.selectTarget": "选择目标标签...",
  "settings.tags.merge": "合并",

  "settings.about.title": "关于",
  "settings.about.version": "版本 {{version}}",
  "settings.about.description": "Mac 剪贴板管理器 — 让复制粘贴更高效",

  "onboarding.step1.title": "欢迎使用 Stash",
  "onboarding.step1.description": "强大的 Mac 剪贴板管理器，让你的复制粘贴更高效",
  "onboarding.step1.feature1.title": "智能历史",
  "onboarding.step1.feature1.desc": "自动记录剪贴板，智能分类文本、代码、链接、颜色",
  "onboarding.step1.feature2.title": "即时搜索",
  "onboarding.step1.feature2.desc": "全文搜索，快速找到任何历史内容",
  "onboarding.step1.feature3.title": "模板片段",
  "onboarding.step1.feature3.desc": "保存常用文本片段，一键粘贴",
  "onboarding.step1.feature4.title": "丰富预览",
  "onboarding.step1.feature4.desc": "代码高亮、JSON 格式化、颜色预览",

  "onboarding.step2.title": "快捷键",
  "onboarding.step2.description": "用一个快捷键唤起 Stash",
  "onboarding.step2.shortcutHint": "按下 ⇧⌘V 即可随时唤起剪贴板面板",
  "onboarding.step2.autoPaste": "选择条目后自动粘贴到当前应用",
  "onboarding.step2.moreShortcuts": "更多快捷键",
  "onboarding.step2.numbers": "数字 1-9",
  "onboarding.step2.numbersDesc": "快速粘贴对应条目",
  "onboarding.step2.openSettings": "打开设置",
  "onboarding.step2.closePanel": "关闭面板",

  "onboarding.step3.title": "隐私与同步",
  "onboarding.step3.description": "你的数据安全是第一位的",
  "onboarding.step3.storage.title": "数据存储",
  "onboarding.step3.storage.desc": "所有剪贴板数据存储在本地 SQLite 数据库中。可选开启 AES-256 加密保护敏感内容。",
  "onboarding.step3.sync.title": "iCloud 同步",
  "onboarding.step3.sync.desc": "在多台 Mac 之间通过 iCloud Drive 同步剪贴板数据。可随时在设置中更改。",

  "onboarding.step4.title": "准备就绪！",
  "onboarding.step4.description": "开始使用 Stash 提升你的效率",
  "onboarding.step4.ready": "一切准备就绪！",
  "onboarding.step4.hint": "复制任何内容后，按 ⇧⌘V 即可开始使用",

  "onboarding.skip": "跳过",
  "onboarding.next": "下一步",
  "onboarding.start": "开始使用",

  "template.title": "模板片段",
  "template.new": "+ 新建",
  "template.empty": "暂无模板，点击上方\"+ 新建\"创建",
  "template.edit": "编辑模板",
  "template.create": "新建模板",
  "template.namePlaceholder": "模板名称",
  "template.contentPlaceholder": "模板内容",

  "tagPicker.placeholder": "搜索或新建标签...",
  "tagPicker.similar": "相似标签建议",
  "tagPicker.use": "使用 \"{{name}}\"",
  "tagPicker.create": "新建 \"{{name}}\"",
  "tagPicker.empty": "无标签，输入名称新建",
  "tagPicker.selected": "已选 {{count}} 个标签",
  "tagPicker.confirm": "确认 (Enter)",

  "tray.openPanel": "打开面板",
  "tray.launchAtLogin": "开机自启",
  "tray.quit": "退出"
}
```

**Step 2: Create en.json**

```json
{
  "common.confirm": "Confirm",
  "common.cancel": "Cancel",
  "common.close": "Close",
  "common.save": "Save",
  "common.delete": "Delete",
  "common.all": "All",

  "panel.tabs.clipboard": "Clipboard",
  "panel.tabs.templates": "Templates",
  "panel.search.placeholder": "Search...",
  "panel.settings.tooltip": "Settings (⌘,)",
  "panel.empty.title": "No clipboard records",
  "panel.empty.subtitle": "Copied content will appear here automatically",
  "panel.preview.expand": "Expand details (⌥)",
  "panel.quickEdit.title": "Quick Edit",

  "panel.filter.all": "All",
  "panel.filter.text": "Text",
  "panel.filter.code": "Code",
  "panel.filter.url": "URL",
  "panel.filter.json": "JSON",
  "panel.filter.color": "Color",
  "panel.filter.image": "Image",

  "panel.tagBar.starred": "Starred",

  "panel.context.paste": "Paste",
  "panel.context.copy": "Copy Content",
  "panel.context.tag": "Tag (T)",
  "panel.context.favorite": "Favorite",
  "panel.context.unfavorite": "Unfavorite",
  "panel.context.pin": "Pin",
  "panel.context.unpin": "Unpin",
  "panel.context.delete": "Delete",

  "panel.image.fallback": "Image",

  "time.justNow": "now",
  "time.minutesAgo": "{{count}}m",
  "time.hoursAgo": "{{count}}h",
  "time.daysAgo": "{{count}}d",

  "settings.title": "Settings",
  "settings.nav.general": "General",
  "settings.nav.shortcuts": "Shortcuts",
  "settings.nav.sync": "Sync",
  "settings.nav.privacy": "Privacy",
  "settings.nav.theme": "Theme",
  "settings.nav.tags": "Tags",
  "settings.nav.about": "About",

  "settings.general.title": "General",
  "settings.general.language": "Language",
  "settings.general.language.desc": "Choose display language",
  "settings.general.language.auto": "Auto (System)",
  "settings.general.language.zhCN": "简体中文",
  "settings.general.language.en": "English",
  "settings.general.language.zhTW": "繁體中文",
  "settings.general.launchAtLogin": "Launch at Login",
  "settings.general.launchAtLogin.desc": "Automatically start Stash when logging into macOS",
  "settings.general.historyRetention": "History Retention",
  "settings.general.historyRetention.desc": "Non-favorited/non-pinned records older than this will be auto-cleaned",
  "settings.general.retention.1day": "1 Day",
  "settings.general.retention.7days": "7 Days",
  "settings.general.retention.30days": "30 Days",
  "settings.general.retention.forever": "Forever",
  "settings.general.maxItems": "Max Items",
  "settings.general.maxItems.desc": "Oldest non-favorited records are deleted when limit is exceeded",

  "settings.shortcuts.title": "Shortcuts",
  "settings.shortcuts.showPanel": "Show Panel",
  "settings.shortcuts.showPanel.desc": "Global shortcut to show/hide the clipboard panel",
  "settings.shortcuts.sequencePaste": "Sequence Paste",
  "settings.shortcuts.sequencePaste.desc": "Paste the next item from the queue",
  "settings.shortcuts.batchPaste": "Batch Paste",
  "settings.shortcuts.batchPaste.desc": "Paste all items in the queue at once",
  "settings.shortcuts.addToQueue": "Add to Queue",
  "settings.shortcuts.addToQueue.desc": "Add selected item to the paste queue in the panel",
  "settings.shortcuts.batchSeparator": "Batch Paste Separator",
  "settings.shortcuts.batchSeparator.desc": "Separator between items when batch pasting",
  "settings.shortcuts.separator.newline": "Newline",
  "settings.shortcuts.separator.tab": "Tab",
  "settings.shortcuts.separator.comma": "Comma",
  "settings.shortcuts.separator.space": "Space",
  "settings.shortcuts.hint": "Tip: Use ⌘+Click to multi-select items in the panel, press Enter to batch add to queue",

  "settings.sync.title": "iCloud Sync",
  "settings.sync.enable": "Enable iCloud Sync",
  "settings.sync.enable.desc": "Sync clipboard data across multiple Macs via iCloud Drive",
  "settings.sync.now": "Sync Now",
  "settings.sync.now.desc": "Manually trigger a sync",
  "settings.sync.syncing": "Syncing...",
  "settings.sync.syncButton": "Sync",

  "settings.privacy.title": "Privacy & Security",
  "settings.privacy.encryption": "Encrypted Storage",
  "settings.privacy.encryption.desc": "Encrypt clipboard content with AES-256-GCM (requires password)",
  "settings.privacy.clearAll": "Clear All Data",
  "settings.privacy.clearAll.desc": "Delete all clipboard records (cannot be undone)",
  "settings.privacy.confirmClear": "Confirm Clear?",
  "settings.privacy.clearButton": "Clear",

  "settings.theme.title": "Theme",
  "settings.theme.auto": "Auto",
  "settings.theme.dark": "Dark",
  "settings.theme.light": "Light",

  "settings.tags.title": "Tag Management",
  "settings.tags.total": "Total Tags",
  "settings.tags.singleUse": "Single Use",
  "settings.tags.tooMany": "You have more than 15 tags. Consider merging similar tags for better efficiency.",
  "settings.tags.empty": "No tags",
  "settings.tags.rename": "Rename",
  "settings.tags.mergeTo": "Merge to...",
  "settings.tags.confirmDelete": "Click again to confirm delete",
  "settings.tags.selectTarget": "Select target tag...",
  "settings.tags.merge": "Merge",

  "settings.about.title": "About",
  "settings.about.version": "Version {{version}}",
  "settings.about.description": "Mac Clipboard Manager — Make Copy-Paste More Efficient",

  "onboarding.step1.title": "Welcome to Stash",
  "onboarding.step1.description": "A powerful Mac clipboard manager to boost your copy-paste workflow",
  "onboarding.step1.feature1.title": "Smart History",
  "onboarding.step1.feature1.desc": "Auto-records clipboard with smart categorization: text, code, URLs, colors",
  "onboarding.step1.feature2.title": "Instant Search",
  "onboarding.step1.feature2.desc": "Full-text search to quickly find any history",
  "onboarding.step1.feature3.title": "Templates",
  "onboarding.step1.feature3.desc": "Save frequently used text snippets for one-click paste",
  "onboarding.step1.feature4.title": "Rich Preview",
  "onboarding.step1.feature4.desc": "Code highlighting, JSON formatting, color preview",

  "onboarding.step2.title": "Shortcuts",
  "onboarding.step2.description": "Summon Stash with a single shortcut",
  "onboarding.step2.shortcutHint": "Press ⇧⌘V to open the clipboard panel anytime",
  "onboarding.step2.autoPaste": "Selected item is auto-pasted to the active app",
  "onboarding.step2.moreShortcuts": "More Shortcuts",
  "onboarding.step2.numbers": "Numbers 1-9",
  "onboarding.step2.numbersDesc": "Quick paste corresponding item",
  "onboarding.step2.openSettings": "Open Settings",
  "onboarding.step2.closePanel": "Close Panel",

  "onboarding.step3.title": "Privacy & Sync",
  "onboarding.step3.description": "Your data security comes first",
  "onboarding.step3.storage.title": "Data Storage",
  "onboarding.step3.storage.desc": "All clipboard data is stored in a local SQLite database. Optionally enable AES-256 encryption for sensitive content.",
  "onboarding.step3.sync.title": "iCloud Sync",
  "onboarding.step3.sync.desc": "Sync clipboard data across multiple Macs via iCloud Drive. You can change this anytime in Settings.",

  "onboarding.step4.title": "All Set!",
  "onboarding.step4.description": "Start using Stash to boost your productivity",
  "onboarding.step4.ready": "Everything is ready!",
  "onboarding.step4.hint": "After copying anything, press ⇧⌘V to start using Stash",

  "onboarding.skip": "Skip",
  "onboarding.next": "Next",
  "onboarding.start": "Get Started",

  "template.title": "Templates",
  "template.new": "+ New",
  "template.empty": "No templates yet. Click \"+ New\" above to create one",
  "template.edit": "Edit Template",
  "template.create": "New Template",
  "template.namePlaceholder": "Template name",
  "template.contentPlaceholder": "Template content",

  "tagPicker.placeholder": "Search or create tag...",
  "tagPicker.similar": "Similar tag suggestions",
  "tagPicker.use": "Use \"{{name}}\"",
  "tagPicker.create": "Create \"{{name}}\"",
  "tagPicker.empty": "No tags. Type a name to create one",
  "tagPicker.selected": "{{count}} tag(s) selected",
  "tagPicker.confirm": "Confirm (Enter)",

  "tray.openPanel": "Open Panel",
  "tray.launchAtLogin": "Launch at Login",
  "tray.quit": "Quit"
}
```

**Step 3: Create zh-TW.json**

```json
{
  "common.confirm": "確認",
  "common.cancel": "取消",
  "common.close": "關閉",
  "common.save": "儲存",
  "common.delete": "刪除",
  "common.all": "全部",

  "panel.tabs.clipboard": "剪貼簿",
  "panel.tabs.templates": "範本",
  "panel.search.placeholder": "搜尋...",
  "panel.settings.tooltip": "設定 (⌘,)",
  "panel.empty.title": "暫無剪貼簿記錄",
  "panel.empty.subtitle": "複製內容後將自動出現在這裡",
  "panel.preview.expand": "展開詳情 (⌥)",
  "panel.quickEdit.title": "快速編輯",

  "panel.filter.all": "全部",
  "panel.filter.text": "文字",
  "panel.filter.code": "程式碼",
  "panel.filter.url": "URL",
  "panel.filter.json": "JSON",
  "panel.filter.color": "顏色",
  "panel.filter.image": "圖片",

  "panel.tagBar.starred": "收藏",

  "panel.context.paste": "貼上",
  "panel.context.copy": "複製內容",
  "panel.context.tag": "加標籤 (T)",
  "panel.context.favorite": "收藏",
  "panel.context.unfavorite": "取消收藏",
  "panel.context.pin": "置頂",
  "panel.context.unpin": "取消置頂",
  "panel.context.delete": "刪除",

  "panel.image.fallback": "圖片",

  "time.justNow": "剛剛",
  "time.minutesAgo": "{{count}}m",
  "time.hoursAgo": "{{count}}h",
  "time.daysAgo": "{{count}}d",

  "settings.title": "設定",
  "settings.nav.general": "一般",
  "settings.nav.shortcuts": "快捷鍵",
  "settings.nav.sync": "同步",
  "settings.nav.privacy": "隱私",
  "settings.nav.theme": "主題",
  "settings.nav.tags": "標籤管理",
  "settings.nav.about": "關於",

  "settings.general.title": "一般設定",
  "settings.general.language": "語言",
  "settings.general.language.desc": "選擇介面顯示語言",
  "settings.general.language.auto": "自動（跟隨系統）",
  "settings.general.language.zhCN": "简体中文",
  "settings.general.language.en": "English",
  "settings.general.language.zhTW": "繁體中文",
  "settings.general.launchAtLogin": "開機自啟",
  "settings.general.launchAtLogin.desc": "登入 macOS 時自動啟動 Stash",
  "settings.general.historyRetention": "歷史保留時間",
  "settings.general.historyRetention.desc": "超過時間的非收藏/非置頂記錄將自動清理",
  "settings.general.retention.1day": "1 天",
  "settings.general.retention.7days": "7 天",
  "settings.general.retention.30days": "30 天",
  "settings.general.retention.forever": "永久",
  "settings.general.maxItems": "最大記錄數",
  "settings.general.maxItems.desc": "超過限制時自動刪除最舊的非收藏記錄",

  "settings.shortcuts.title": "快捷鍵",
  "settings.shortcuts.showPanel": "喚起面板",
  "settings.shortcuts.showPanel.desc": "全域快捷鍵，喚起/隱藏剪貼簿面板",
  "settings.shortcuts.sequencePaste": "序列貼上",
  "settings.shortcuts.sequencePaste.desc": "從佇列中貼上下一條內容",
  "settings.shortcuts.batchPaste": "批次貼上",
  "settings.shortcuts.batchPaste.desc": "一次性貼上佇列中所有內容",
  "settings.shortcuts.addToQueue": "加入佇列",
  "settings.shortcuts.addToQueue.desc": "在面板內將選中條目加入貼上佇列",
  "settings.shortcuts.batchSeparator": "批次貼上分隔符",
  "settings.shortcuts.batchSeparator.desc": "批次貼上時，多條內容之間的分隔方式",
  "settings.shortcuts.separator.newline": "換行",
  "settings.shortcuts.separator.tab": "Tab",
  "settings.shortcuts.separator.comma": "逗號",
  "settings.shortcuts.separator.space": "空格",
  "settings.shortcuts.hint": "提示：在面板中使用 ⌘+Click 多選條目，按 Enter 批次加入佇列",

  "settings.sync.title": "iCloud 同步",
  "settings.sync.enable": "啟用 iCloud 同步",
  "settings.sync.enable.desc": "透過 iCloud Drive 在多台 Mac 間同步剪貼簿資料",
  "settings.sync.now": "立即同步",
  "settings.sync.now.desc": "手動觸發一次同步",
  "settings.sync.syncing": "同步中...",
  "settings.sync.syncButton": "同步",

  "settings.privacy.title": "隱私與安全",
  "settings.privacy.encryption": "加密儲存",
  "settings.privacy.encryption.desc": "使用 AES-256-GCM 加密剪貼簿內容（需設定密碼）",
  "settings.privacy.clearAll": "清空所有資料",
  "settings.privacy.clearAll.desc": "刪除所有剪貼簿記錄（不可恢復）",
  "settings.privacy.confirmClear": "確認清空？",
  "settings.privacy.clearButton": "清空",

  "settings.theme.title": "主題",
  "settings.theme.auto": "自動",
  "settings.theme.dark": "深色",
  "settings.theme.light": "淺色",

  "settings.tags.title": "標籤管理",
  "settings.tags.total": "總標籤數",
  "settings.tags.singleUse": "僅 1 條內容",
  "settings.tags.tooMany": "標籤數量超過 15 個，建議合併類似標籤以保持高效率。",
  "settings.tags.empty": "暫無標籤",
  "settings.tags.rename": "重新命名",
  "settings.tags.mergeTo": "合併到...",
  "settings.tags.confirmDelete": "再次點擊確認刪除",
  "settings.tags.selectTarget": "選擇目標標籤...",
  "settings.tags.merge": "合併",

  "settings.about.title": "關於",
  "settings.about.version": "版本 {{version}}",
  "settings.about.description": "Mac 剪貼簿管理器 — 讓複製貼上更高效",

  "onboarding.step1.title": "歡迎使用 Stash",
  "onboarding.step1.description": "強大的 Mac 剪貼簿管理器，讓你的複製貼上更高效",
  "onboarding.step1.feature1.title": "智慧歷史",
  "onboarding.step1.feature1.desc": "自動記錄剪貼簿，智慧分類文字、程式碼、連結、顏色",
  "onboarding.step1.feature2.title": "即時搜尋",
  "onboarding.step1.feature2.desc": "全文搜尋，快速找到任何歷史內容",
  "onboarding.step1.feature3.title": "範本片段",
  "onboarding.step1.feature3.desc": "儲存常用文字片段，一鍵貼上",
  "onboarding.step1.feature4.title": "豐富預覽",
  "onboarding.step1.feature4.desc": "程式碼高亮、JSON 格式化、顏色預覽",

  "onboarding.step2.title": "快捷鍵",
  "onboarding.step2.description": "用一個快捷鍵喚起 Stash",
  "onboarding.step2.shortcutHint": "按下 ⇧⌘V 即可隨時喚起剪貼簿面板",
  "onboarding.step2.autoPaste": "選擇條目後自動貼上到目前應用",
  "onboarding.step2.moreShortcuts": "更多快捷鍵",
  "onboarding.step2.numbers": "數字 1-9",
  "onboarding.step2.numbersDesc": "快速貼上對應條目",
  "onboarding.step2.openSettings": "開啟設定",
  "onboarding.step2.closePanel": "關閉面板",

  "onboarding.step3.title": "隱私與同步",
  "onboarding.step3.description": "你的資料安全是第一位的",
  "onboarding.step3.storage.title": "資料儲存",
  "onboarding.step3.storage.desc": "所有剪貼簿資料儲存在本地 SQLite 資料庫中。可選開啟 AES-256 加密保護敏感內容。",
  "onboarding.step3.sync.title": "iCloud 同步",
  "onboarding.step3.sync.desc": "在多台 Mac 之間透過 iCloud Drive 同步剪貼簿資料。可隨時在設定中變更。",

  "onboarding.step4.title": "準備就緒！",
  "onboarding.step4.description": "開始使用 Stash 提升你的效率",
  "onboarding.step4.ready": "一切準備就緒！",
  "onboarding.step4.hint": "複製任何內容後，按 ⇧⌘V 即可開始使用",

  "onboarding.skip": "跳過",
  "onboarding.next": "下一步",
  "onboarding.start": "開始使用",

  "template.title": "範本片段",
  "template.new": "+ 新建",
  "template.empty": "暫無範本，點擊上方\"+ 新建\"建立",
  "template.edit": "編輯範本",
  "template.create": "新建範本",
  "template.namePlaceholder": "範本名稱",
  "template.contentPlaceholder": "範本內容",

  "tagPicker.placeholder": "搜尋或新建標籤...",
  "tagPicker.similar": "相似標籤建議",
  "tagPicker.use": "使用 \"{{name}}\"",
  "tagPicker.create": "新建 \"{{name}}\"",
  "tagPicker.empty": "無標籤，輸入名稱新建",
  "tagPicker.selected": "已選 {{count}} 個標籤",
  "tagPicker.confirm": "確認 (Enter)",

  "tray.openPanel": "開啟面板",
  "tray.launchAtLogin": "開機自啟",
  "tray.quit": "結束"
}
```

**Step 4: Commit**

```bash
git add src/renderer/src/locales/
git commit -m "feat: add i18n translation files for zh-CN, en, zh-TW"
```

---

### Task 3: Create i18n initialization and update settingsStore

**Files:**
- Create: `src/renderer/src/i18n.ts`
- Modify: `src/renderer/src/main.tsx`
- Modify: `src/renderer/src/stores/settingsStore.ts`

**Step 1: Create i18n.ts**

Create `src/renderer/src/i18n.ts`:

```typescript
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'
import zhCN from './locales/zh-CN.json'
import en from './locales/en.json'
import zhTW from './locales/zh-TW.json'

const STORAGE_KEY = 'zpaste-settings'

function getInitialLanguage(): string {
  // 1. Check user preference from localStorage
  try {
    const raw = localStorage.getItem(STORAGE_KEY)
    if (raw) {
      const settings = JSON.parse(raw)
      if (settings.language && settings.language !== 'auto') {
        return settings.language
      }
    }
  } catch {
    // ignore
  }

  // 2. Detect system language via navigator
  const sysLang = navigator.language || 'zh-CN'
  if (sysLang.startsWith('zh-TW') || sysLang.startsWith('zh-Hant')) return 'zh-TW'
  if (sysLang.startsWith('zh')) return 'zh-CN'
  if (sysLang.startsWith('en')) return 'en'

  // 3. Fallback
  return 'zh-CN'
}

i18n.use(initReactI18next).init({
  resources: {
    'zh-CN': { translation: zhCN },
    en: { translation: en },
    'zh-TW': { translation: zhTW }
  },
  lng: getInitialLanguage(),
  fallbackLng: 'zh-CN',
  interpolation: {
    escapeValue: false
  }
})

export default i18n
```

**Step 2: Import i18n in main.tsx**

Modify `src/renderer/src/main.tsx` — add `import './i18n'` before the App import:

```typescript
import './assets/main.css'
import './i18n'
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import App from './App'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>
)
```

**Step 3: Add language field to settingsStore**

Modify `src/renderer/src/stores/settingsStore.ts`:

- Add `language: LanguageMode` to the `Settings` interface (where `type LanguageMode = 'auto' | 'zh-CN' | 'en' | 'zh-TW'`)
- Add `setLanguage: (lang: LanguageMode) => void` to `SettingsState`
- Default `language: 'auto'`
- In `setLanguage`, call `i18n.changeLanguage(resolvedLang)` to switch language at runtime
- Add `language` to `saveSettings`

The `setLanguage` implementation:

```typescript
import i18n from '../i18n'

export type LanguageMode = 'auto' | 'zh-CN' | 'en' | 'zh-TW'

// Add to Settings interface:
//   language: LanguageMode

// Add to defaults:
//   language: 'auto'

// resolveLanguage helper:
function resolveLanguage(mode: LanguageMode): string {
  if (mode !== 'auto') return mode
  const sysLang = navigator.language || 'zh-CN'
  if (sysLang.startsWith('zh-TW') || sysLang.startsWith('zh-Hant')) return 'zh-TW'
  if (sysLang.startsWith('zh')) return 'zh-CN'
  if (sysLang.startsWith('en')) return 'en'
  return 'zh-CN'
}

// setLanguage action:
setLanguage: (lang) => {
  set({ language: lang })
  i18n.changeLanguage(resolveLanguage(lang))
  get().saveSettings()
}
```

**Step 4: Verify the build compiles**

Run:
```bash
cd /Users/ryanbzhou/Developer/vibe-coding/freedom/z-paste && npx electron-vite build 2>&1 | tail -5
```

**Step 5: Commit**

```bash
git add src/renderer/src/i18n.ts src/renderer/src/main.tsx src/renderer/src/stores/settingsStore.ts
git commit -m "feat: initialize i18n with language detection and settings integration"
```

---

### Task 4: Convert Panel components to use i18n

**Files:**
- Modify: `src/renderer/src/components/Panel/PanelWindow.tsx`
- Modify: `src/renderer/src/components/Panel/SearchBar.tsx`
- Modify: `src/renderer/src/components/Panel/ClipboardList.tsx`
- Modify: `src/renderer/src/components/Panel/ClipboardItem.tsx`
- Modify: `src/renderer/src/components/Panel/FilterTabs.tsx`
- Modify: `src/renderer/src/components/Panel/TagBar.tsx`
- Modify: `src/renderer/src/components/Panel/TagPicker.tsx`
- Modify: `src/renderer/src/components/Panel/QuickEdit.tsx`
- Modify: `src/renderer/src/components/Panel/Sidebar.tsx`

For each file, add `import { useTranslation } from 'react-i18next'` and destructure `const { t } = useTranslation()`, then replace every hardcoded Chinese string with the corresponding `t('key')` call.

**Key replacements per file:**

**PanelWindow.tsx:**
- `"剪贴板"` → `t('panel.tabs.clipboard')`
- `"模板"` → `t('panel.tabs.templates')`
- `"设置 (⌘,)"` → `t('panel.settings.tooltip')`
- `"展开详情 (⌥)"` → `t('panel.preview.expand')`

**SearchBar.tsx:**
- `"搜索..."` → `t('panel.search.placeholder')`

**ClipboardList.tsx:**
- `"暂无剪贴板记录"` → `t('panel.empty.title')`
- `"复制内容后将自动出现在这里"` → `t('panel.empty.subtitle')`

**ClipboardItem.tsx:**
- `formatTime` function: `'刚刚'` → `t('time.justNow')`, and use `t('time.minutesAgo', { count })`, etc.
- Context menu labels: `"粘贴"` → `t('panel.context.paste')`, `"复制内容"` → `t('panel.context.copy')`, etc.
- `"打标签 (T)"` → `t('panel.context.tag')`
- `item.is_favorite ? '取消收藏' : '收藏'` → `item.is_favorite ? t('panel.context.unfavorite') : t('panel.context.favorite')`
- `item.is_pinned ? '取消置顶' : '置顶'` → `item.is_pinned ? t('panel.context.unpin') : t('panel.context.pin')`
- `"删除"` → `t('panel.context.delete')`
- `'图片'` → `t('panel.image.fallback')`

Note: `formatTime` uses `t()` from i18next, so it needs to accept `t` as a parameter or use `i18next.t()` directly since it's not a component. Best approach: pass `t` as a parameter.

**FilterTabs.tsx:**
- Replace TABS labels: `'全部'` → `t('panel.filter.all')`, `'文本'` → `t('panel.filter.text')`, etc.
- The TABS array should be computed inside the component using `t()`.
- Source app `"全部"` badge → `t('panel.filter.all')`

**TagBar.tsx:**
- `"全部"` → `t('common.all')`
- `"收藏"` → `t('panel.tagBar.starred')`

**TagPicker.tsx:**
- `"搜索或新建标签..."` → `t('tagPicker.placeholder')`
- `"相似标签建议"` → `t('tagPicker.similar')`
- `使用 "${t.name}"` → `t('tagPicker.use', { name: tag.name })`
- `新建 "${query.trim()}"` → `t('tagPicker.create', { name: query.trim() })`
- `"无标签，输入名称新建"` → `t('tagPicker.empty')`
- `已选 ${selectedSlugs.size} 个标签` → `t('tagPicker.selected', { count: selectedSlugs.size })`
- `"确认 (Enter)"` → `t('tagPicker.confirm')`

**QuickEdit.tsx:**
- `"快速编辑"` → `t('panel.quickEdit.title')`
- `"取消"` → `t('common.cancel')`
- `"保存"` → `t('common.save')`

**Sidebar.tsx:**
- `"全部"` → `t('common.all')`
- `"已收藏"` → `t('panel.tagBar.starred')`

**Step (final): Commit**

```bash
git add src/renderer/src/components/Panel/
git commit -m "feat: i18n all Panel components"
```

---

### Task 5: Convert Settings page to use i18n

**Files:**
- Modify: `src/renderer/src/components/Settings/SettingsPage.tsx`

Replace all hardcoded Chinese strings using `t()`. Key changes:

- SECTIONS array: move inside component, use `t()` for labels
- `"设置"` → `t('settings.title')`
- `"关闭"` → `t('common.close')`
- All section titles, labels, descriptions — use corresponding `settings.*` keys
- Add language selector in `GeneralSection` (see Task 7 for the full UI)

Also add the language selector UI in GeneralSection, between the existing items:

```tsx
<SettingsItem label={t('settings.general.language')} description={t('settings.general.language.desc')}>
  <Select value={language} onValueChange={(v) => setLanguage(v as LanguageMode)}>
    <SelectTrigger className="w-[160px]">
      <SelectValue />
    </SelectTrigger>
    <SelectContent>
      <SelectItem value="auto">{t('settings.general.language.auto')}</SelectItem>
      <SelectItem value="zh-CN">{t('settings.general.language.zhCN')}</SelectItem>
      <SelectItem value="en">{t('settings.general.language.en')}</SelectItem>
      <SelectItem value="zh-TW">{t('settings.general.language.zhTW')}</SelectItem>
    </SelectContent>
  </Select>
</SettingsItem>
<Separator />
```

**Step (final): Commit**

```bash
git add src/renderer/src/components/Settings/
git commit -m "feat: i18n Settings page with language selector"
```

---

### Task 6: Convert Onboarding and Template components to use i18n

**Files:**
- Modify: `src/renderer/src/components/Onboarding/OnboardingPage.tsx`
- Modify: `src/renderer/src/components/Templates/TemplateList.tsx`
- Modify: `src/renderer/src/components/Templates/TemplateEditor.tsx`

**OnboardingPage.tsx:**
- All step titles, descriptions, feature texts, button labels — use `onboarding.*` keys
- `"跳过"` → `t('onboarding.skip')`
- `"下一步"` → `t('onboarding.next')`
- `"开始使用"` → `t('onboarding.start')`

**TemplateList.tsx:**
- `"模板片段"` → `t('template.title')`
- `"+ 新建"` → `t('template.new')`
- `暂无模板...` → `t('template.empty')`

**TemplateEditor.tsx:**
- `"编辑模板"` / `"新建模板"` → `t('template.edit')` / `t('template.create')`
- `"取消"` → `t('common.cancel')`
- `"模板名称"` → `t('template.namePlaceholder')`
- `"模板内容"` → `t('template.contentPlaceholder')`
- `"保存"` → `t('common.save')`

**Step (final): Commit**

```bash
git add src/renderer/src/components/Onboarding/ src/renderer/src/components/Templates/
git commit -m "feat: i18n Onboarding and Template components"
```

---

### Task 7: Main process i18n — tray menu

**Files:**
- Modify: `src/main/tray.ts`
- Modify: `src/main/index.ts`
- Modify: `src/preload/index.ts`

**Step 1: Add i18next to main process**

In `src/main/tray.ts`, import i18next and use it for tray menu labels. Since the main process can't use `react-i18next`, use `i18next` directly.

Create a simple i18n setup for the main process. Since translations are small, inline the tray keys or import the same JSON files.

Approach: Add a `createMainI18n()` function in tray.ts or a shared file. For simplicity, use a dictionary object since there are only 3 tray strings.

```typescript
// In tray.ts, add tray translations inline:
const trayLabels: Record<string, Record<string, string>> = {
  'zh-CN': { openPanel: '打开面板', launchAtLogin: '开机自启', quit: '退出' },
  en: { openPanel: 'Open Panel', launchAtLogin: 'Launch at Login', quit: 'Quit' },
  'zh-TW': { openPanel: '開啟面板', launchAtLogin: '開機自啟', quit: '結束' }
}
```

Add a `setLanguage(lang: string)` method to TrayManager that rebuilds the context menu.

**Step 2: Add IPC handler for language change**

In `src/main/index.ts`, add:
```typescript
ipcMain.handle('settings:setLanguage', async (_, lang: string) => {
  trayManager.setLanguage(lang)
})
```

**Step 3: Add IPC call in preload**

In `src/preload/index.ts`, add:
```typescript
setLanguage: (lang: string) => ipcRenderer.invoke('settings:setLanguage', lang),
```

**Step 4: Call IPC from settingsStore**

In `setLanguage` action of settingsStore, also call `window.api.setLanguage(resolvedLang)`.

**Step 5: Verify build**

Run:
```bash
cd /Users/ryanbzhou/Developer/vibe-coding/freedom/z-paste && npx electron-vite build 2>&1 | tail -5
```

**Step 6: Commit**

```bash
git add src/main/tray.ts src/main/index.ts src/preload/index.ts src/renderer/src/stores/settingsStore.ts
git commit -m "feat: i18n tray menu with IPC language sync"
```

---

### Task 8: Final verification and build

**Step 1: Run full typecheck**

```bash
cd /Users/ryanbzhou/Developer/vibe-coding/freedom/z-paste && npm run typecheck
```

**Step 2: Run full build**

```bash
cd /Users/ryanbzhou/Developer/vibe-coding/freedom/z-paste && npm run build
```

**Step 3: Fix any errors found**

Address any TypeScript or build errors.

**Step 4: Final commit**

```bash
git add -A
git commit -m "feat: complete i18n implementation for zh-CN, en, zh-TW"
```
